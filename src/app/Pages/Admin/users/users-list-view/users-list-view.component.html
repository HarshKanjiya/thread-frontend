<div
  @initAnim
  class="w-full p-1 h-[510px] overflow-hidden max-h-full flex flex-col items-center">
  <div
    class="overflow-x-hidden overflow-y-auto w-full h-full grid sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mt-1 custom-table-scrollbar">
    @for (item of data; track $index) {
    <div
      class="flex h-[140px] w-[140px] m-auto flex-col relative items-center justify-between p-3 hover:bg-gray-200 dark:hover:bg-gray-800 transition-all duration-150 rounded-md">
      <p class="top-2 left-2 absolute font-bold opacity-20 text-xl">
        {{ $index + 1 }}
      </p>
      <div class="relative">
        @if (item.Reports) {
        <div
          class="absolute -right-1 top-0 group flex gap-2 items-center justify-center">
          <p
            class="flex items-center justify-center w-3.5 h-3.5 rounded-full absolute top-0 right-0 text-[12px] p-0.5 text-center text-white bg-red-500">
            3
            <span
              class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"></span>
          </p>
        </div>
        }

        <img
          class="h-16 w-16 rounded-full"
          src="{{
            item?.AvatarURL
              ? item?.AvatarURL
              : 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAACUCAMAAAA02EJtAAAAMFBMVEXk5ueutLfn6eqqsLTM0NLq7O26v8KnrrHf4eLHy82xt7rS1dfY29zU2Nnb3t/DyMryEXPkAAAD7klEQVR4nO2c2XLkIAwAQdz4+v+/XRg7GydxPICwoCr0U3bz0iULcYkwNhgMBoPBYDAYDAaDwaArlAJm54B9/dgtwGanPT/wWlro0RbYOmlh+Jnwz21hndmCmjcv+E+E0M6q1nonwOoLzf+4bvIA7GbuTLngUx9pAMvlp/8qq20Hrmp75/nCz81drX4b0h0jm5umiUZX1zSukCwaEC1drX8veI7r1s41/esfrrKRq9oSR9SJNnUApvvCf4lfW5iu+aJxLmgR1txE3TELuSvI/ETdseSqhaJcUFes8qDSj6xS0RhWUlFEUIMrqSpLXU9dQTtnzeWiAU+oCg4RVE46vULeiuoHjm4Pawtm/zOazBQ1/iN+plJVZdP/J4JsIaCQplyQbQktWpVswsJV1QjVuIIJreqpVCValVOpOrSpIFpfQ9op1R1mqP5tVbJcxVcAqo0AerXCyYoVW9CmZKtA/BqATBWwCSAclapC7le4mKjWq+iZlW4XwFbs3orwiA0ZVcITNig4Wj9Deca64FTpRLNvgb4iNOWtO+okiGpZdagW3Vkc0J2tvECcWoiFVpWx4tJKHFRMvaK/ECwsArTDf6f04KLFbWBZCpCPqZ0C01bdC9nFtc1lcAQyN1mC6lTtyjWvJcCT3wSfUBlloHVbGCzJ5VW3brYD+77NLmJoL4F/IekIi2yPeot637/YRfdiBKwTN7LGN5qiLoHfs0D4qbXdNxST2n+Lbfin35ZuWoI/iY3hmxbGiJelMVy7pc8edsZehdMuUjonp9ke/9EpEFA78ccuTeF4ZjFNMaYBKeW0zOv+i24I0YtZ6i+nWK83OXeQCADWLk7zfSj9Wq7Cr8MIW9sNMVA2xvKu+H8pXCG+UxNbYFPJqUV8gkOqCXbSt9/8Jrom2FLlLrDl+mlNKsZvJA9FACbspUXEy6dlwcrEYfQOIdyTWRuWJB55YXGW9c/JKlnj05/x8pniNet6Ef1APHCDcbN2RspulbMgYftUjJcVjzFDSOt/+09MvU0irJh25QSEr5SxKv0ApZwqSQDuyY//QZVmBuR1aoYrMgng4TQ9uyKng+dq1E88qhCQxTSCOYCt0KaW6Vqqim1QKKCwDoCkqFLfKLosAnxHdQFFbU2JB+fVXfNvYRTp4D+Rna6AbKRBkPsaC9VHgyQvBbAPqjDkdgw0E+WxYygjBUoeflcka9JqUPzPpG8KVMNMjeQ8HGo4/HdSi0CFlz9I0l+6th1UEZ9Yr1qW/wOTGNS5eVC5SMyACo8p0KTNWOinnzVI6x1Sjev/i7S/dwBdqCZNWNim/zokjavJiPak/ZmmVfZA2tMR6IIk1cEf4h/bxDWtKov23AAAAABJRU5ErkJggg=='
          }}" />
      </div>
      <div class="flex items-center w-full justify-between gap-3">
        <p class="text-ellipsis overflow-clip flex-1">{{ item?.UserName }}</p>
        <div
          #menu
          class="relative group flex items-center justify-center">
          <button
            (click)="
              this.selectedItem
                ? this.selectedItem == item
                  ? (this.selectedItem = null)
                  : (this.selectedItem = item)
                : (this.selectedItem = item)
            "
            class="p-1 rounded-md transition-all duration-150 hover:bg-gray-300/60 dark:hover:bg-gray-800/60">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="stroke-black dark:stroke-white h-5 w-5">
              <circle cx="12" cy="12" r="1" />
              <circle cx="12" cy="5" r="1" />
              <circle cx="12" cy="19" r="1" />
            </svg>
          </button>
          @if (selectedItem == item) {
          <div
            @dropBody
            class="absolute z-10 text-sm right-[10%] w-max flex flex-col justify-between overflow-hidden bg-white dark:bg-gray-800 rounded-xl border border-gray-300 dark:border-gray-800 {{
              $index > data.length - 3 ? 'bottom-[100%]' : 'top-[100%]'
            }}">
            <button
              type="button"
              class="cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700/60 px-4 py-2 w-fit flex justify-start items-center gap-2 text-sm pt-3 border-none outline-none focus:bg-gray-200 dark:focus:bg-gray-700/60 transition-all duration-150"
              (click)="menuClickHandler('profile')">
              View Profile
            </button>
            <hr class="w-full border-gray-300 dark:border-gray-700" />
            <button
              type="button"
              class="cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700/60 px-4 py-2 w-full flex justify-start items-center gap-2 text-sm pt-3 border-none outline-none focus:bg-gray-200 dark:focus:bg-gray-700/60 transition-all duration-150"
              (click)="menuClickHandler('ban')">
              Ban User
            </button>
          </div>
          }
        </div>
      </div>
    </div>
    }
  </div>
</div>
